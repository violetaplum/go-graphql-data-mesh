# Multi-DB GraphQL

![GraphQL](https://img.shields.io/badge/GraphQL-E10098?style=for-the-badge&logo=graphql&logoColor=white)
![Go](https://img.shields.io/badge/Go-00ADD8?style=for-the-badge&logo=go&logoColor=white)
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-316192?style=for-the-badge&logo=postgresql&logoColor=white)
![MongoDB](https://img.shields.io/badge/MongoDB-4EA94B?style=for-the-badge&logo=mongodb&logoColor=white)
![Neo4j](https://img.shields.io/badge/Neo4j-008CC1?style=for-the-badge&logo=neo4j&logoColor=white)
![Redis](https://img.shields.io/badge/Redis-DC382D?style=for-the-badge&logo=redis&logoColor=white)
![Elasticsearch](https://img.shields.io/badge/Elasticsearch-005571?style=for-the-badge&logo=elasticsearch&logoColor=white)
![Docker](https://img.shields.io/badge/Docker-2496ED?style=for-the-badge&logo=docker&logoColor=white)

A powerful Go-based GraphQL server that seamlessly integrates multiple databases into a unified API. This project demonstrates how to combine relational, document, graph, key-value, and search databases in a single coherent system using clean architecture principles.

## âœ¨ Features

- **Unified GraphQL API** - Seamlessly query data across multiple database systems
- **Clean Architecture** - Domain-driven design with clear separation of concerns
- **Interface-Based Design** - Easily mockable interfaces for robust testing
- **Multi-Database Support**:
    - PostgreSQL for relational data
    - MongoDB for document storage
    - Neo4j for graph relationships
    - Redis for caching and performance
    - Elasticsearch for powerful search capabilities
- **Performance Optimized** - DataLoader implementation to prevent N+1 query problems
- **Docker Ready** - Containerized setup for consistent development and deployment

## ğŸ—ï¸ Architecture

This project follows a clean, hexagonal architecture with:

- **Domain Layer**: Core business logic and interfaces
- **Adapters**: Database-specific implementations
- **GraphQL Layer**: API schema and resolvers
- **Configuration**: Externalized configuration

```
multi-db-graphql/
â”œâ”€â”€ cmd/
â”‚   â””â”€â”€ server/             # Main application entry point
â”œâ”€â”€ domain/                 # Top-level domain package (interfaces and models)
â”‚   â”œâ”€â”€ models/             # Domain model definitions
â”‚   â”œâ”€â”€ repository/         # Repository interfaces
â”‚   â”œâ”€â”€ service/            # Service interfaces
â”‚   â””â”€â”€ ports/              # Other ports/interfaces (cache, messaging, etc.)
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ graph/              # GraphQL related code
â”‚   â”‚   â”œâ”€â”€ generated/      # Code generated by gqlgen
â”‚   â”‚   â”œâ”€â”€ resolvers/      # GraphQL resolvers
â”‚   â”‚   â””â”€â”€ schema/         # GraphQL schema definitions
â”‚   â”œâ”€â”€ adapters/           # Interface implementations
â”‚   â”‚   â”œâ”€â”€ postgres/       # PostgreSQL implementation
â”‚   â”‚   â”œâ”€â”€ mongodb/        # MongoDB implementation
â”‚   â”‚   â”œâ”€â”€ neo4j/          # Neo4j implementation
â”‚   â”‚   â”œâ”€â”€ redis/          # Redis implementation
â”‚   â”‚   â””â”€â”€ elastic/        # Elasticsearch implementation
â”‚   â”œâ”€â”€ middleware/         # HTTP middleware
â”‚   â”œâ”€â”€ config/             # Configuration loader
â”‚   â””â”€â”€ app/                # Application initialization and wiring
â”œâ”€â”€ pkg/                    # Packages that can be used externally
â”‚   â”œâ”€â”€ logger/             # Logging package
â”‚   â””â”€â”€ utils/              # Utility functions
â”œâ”€â”€ mocks/                  # Mock implementations (for testing)
â”œâ”€â”€ configs/                # Configuration files
â”œâ”€â”€ deployments/            # Deployment-related files
â”‚   â”œâ”€â”€ docker-compose.yml  # Docker Compose configuration
â”‚   â””â”€â”€ Dockerfile          # Application Dockerfile
â””â”€â”€ scripts/                # Build and test scripts
```

## ğŸš€ Getting Started

### Prerequisites

- Go 1.18+
- Docker and Docker Compose

### Quick Start

1. **Clone the repository**

```bash
git clone https://github.com/yourusername/multi-db-graphql.git
cd multi-db-graphql
```

2. **Start the databases with Docker**

```bash
docker-compose -f deployments/docker-compose.yml up -d
```

3. **Run the application**

```bash
go run cmd/server/main.go
```

4. **Open GraphQL Playground**

Visit `http://localhost:8080/playground` in your browser to interact with the GraphQL API.

## ğŸ“ Example Queries

Fetch user data from PostgreSQL with related posts from MongoDB:

```graphql
query {
  user(id: "1") {
    id
    name
    email
    posts {
      id
      title
      content
      tags
    }
  }
}
```

Find products with graph relationships using Neo4j:

```graphql
query {
  product(id: "1") {
    name
    price
    category {
      name
    }
    relatedProducts {
      name
      price
    }
  }
}
```

Full-text search with Elasticsearch:

```graphql
query {
  search(term: "golang graphql") {
    products {
      name
      description
      score
    }
    articles {
      title
      content
      author {
        name
      }
      score
    }
  }
}
```

## ğŸ§ª Testing

Run the tests with:

```bash
go test ./...
```

## ğŸ› ï¸ Development

### Generate GraphQL Code

After modifying the schema, regenerate the GraphQL code:

```bash
go run github.com/99designs/gqlgen generate
```

### Adding a New Database

1. Define the interface in `domain/repository/`
2. Implement the adapter in `internal/adapters/`
3. Wire it up in `internal/app/`
4. Update GraphQL resolvers to use the new repository

## ğŸ“š Project Milestones

- [x] Project setup and basic structure
- [x] GraphQL server setup (gqlgen)
- [ ] Basic schema design
- [ ] Database connection infrastructure
- [ ] Multi-database integration
- [ ] Performance optimization
- [ ] Advanced features implementation
- [ ] Testing and documentation
- [ ] Deployment and CI/CD

## ğŸ“– Documentation

- [GraphQL Schema](./docs/schema.md)
- [Database Models](./docs/models.md)
- [API Examples](./docs/api-examples.md)

## ğŸ¤ Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

## ğŸ“„ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## ğŸ™ Acknowledgments

- [gqlgen](https://github.com/99designs/gqlgen) - GraphQL implementation for Go
- [Clean Architecture](https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html) - Architecture principles by Robert C. Martin